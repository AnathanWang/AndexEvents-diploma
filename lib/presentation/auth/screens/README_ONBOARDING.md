# üé® –≠–∫—Ä–∞–Ω—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ (–û–Ω–±–æ—Ä–¥–∏–Ω–≥) - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

## ‚úÖ –ß—Ç–æ —Å–æ–∑–¥–∞–Ω–æ:

### **3 —ç–∫—Ä–∞–Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è:**
1. `setup_profile_screen.dart` - –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (—Ñ–æ—Ç–æ, –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª)
2. `setup_interests_screen.dart` - –í—ã–±–æ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤ (–º–∏–Ω–∏–º—É–º 3)
3. `setup_location_screen.dart` - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≥–µ–æ–ª–æ–∫–∞—Ü–∏–∏

---

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### **–®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç–µ login_screen.dart**

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ Firebase –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–π—Ç–µ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:

```dart
// –í _handleLogin –∏–ª–∏ –ø–æ—Å–ª–µ Firebase Auth
if (isNewUser) {
  // –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
  Navigator.of(context).pushReplacement(
    MaterialPageRoute<void>(
      builder: (context) => const SetupProfileScreen(),
    ),
  );
} else {
  // –°—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  Navigator.of(context).pushReplacement(
    MaterialPageRoute<void>(
      builder: (context) => const HomeShell(),
    ),
  );
}
```

### **–®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç–µ register_screen.dart**

–ü–æ—Å–ª–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥:

```dart
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
Navigator.of(context).pushReplacement(
  MaterialPageRoute<void>(
    builder: (context) => const SetupProfileScreen(),
  ),
);
```

---

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

–í—Å–µ —ç–∫—Ä–∞–Ω—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤–∞—à —Å—Ç–∏–ª—å:

- **–¶–≤–µ—Ç–∞:**
  - –û—Å–Ω–æ–≤–Ω–æ–π: `#5E60CE` (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π)
  - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ: `#7B68EE`, `#9370DB`
  - –°–µ—Ä—ã–π: `#9E9E9E`
  - –¢–µ–º–Ω—ã–π —Ç–µ–∫—Å—Ç: `#4A4D6A`

- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
  - –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ: `16px`
  - –í—ã—Å–æ—Ç–∞ –∫–Ω–æ–ø–æ–∫: `vertical: 16`
  - –û—Ç—Å—Ç—É–ø—ã: `24px`

- **–ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä:**
  - 3 —Å–µ–≥–º–µ–Ω—Ç–∞ (–ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–∫—Ä–∞–Ω–æ–≤)
  - –ê–∫—Ç–∏–≤–Ω—ã–π: —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π
  - –ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π: —Å–µ—Ä—ã–π

---

## üì± –ü–æ—Ç–æ–∫ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

```
LoginScreen
    ‚Üì (Firebase Auth —É—Å–ø–µ—à–Ω–æ)
    ‚Üì (isNewUser?)
    ‚Üì
SetupProfileScreen (1/3)
    ‚Üì (–§–æ—Ç–æ, –≤–æ–∑—Ä–∞—Å—Ç, –ø–æ–ª)
    ‚Üì (–ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
    ‚Üì
SetupInterestsScreen (2/3)
    ‚Üì (–ú–∏–Ω–∏–º—É–º 3 –∏–Ω—Ç–µ—Ä–µ—Å–∞)
    ‚Üì (–ù–µ–ª—å–∑—è –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –±–µ–∑ –≤—ã–±–æ—Ä–∞)
    ‚Üì
SetupLocationScreen (3/3)
    ‚Üì (–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è)
    ‚Üì (–ú–æ–∂–Ω–æ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å)
    ‚Üì
HomeShell (–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω)
```

---

## üîß –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–æ–¥–µ–ª–∞—Ç—å:

### **1. Backend API –≤—ã–∑–æ–≤—ã**

–í –∫–∞–∂–¥–æ–º —ç–∫—Ä–∞–Ω–µ –µ—Å—Ç—å `TODO` –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:

**SetupProfileScreen:**
```dart
// TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –Ω–∞ backend
// PUT /api/users/me
// Body: { age, gender, photoUrl }
```

**SetupInterestsScreen:**
```dart
// TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–µ—Å—ã –Ω–∞ backend
// PUT /api/users/me
// Body: { interests: ["–ú—É–∑—ã–∫–∞", "–°–ø–æ—Ä—Ç", "IT"] }
```

**SetupLocationScreen:**
```dart
// TODO: –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –Ω–∞ backend
// PUT /api/users/me/location
// Body: { latitude, longitude }
```

### **2. –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ**

–í `SetupProfileScreen` –µ—Å—Ç—å `ImagePicker`, –Ω–æ –Ω—É–∂–Ω–æ:
- –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–æ—Ç–æ –Ω–∞ Firebase Storage
- –ü–æ–ª—É—á–∏—Ç—å URL
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å URL –Ω–∞ backend

–ü—Ä–∏–º–µ—Ä:
```dart
Future<String?> _uploadPhoto(File image) async {
  final storageRef = FirebaseStorage.instance
      .ref()
      .child('profile_photos/${user.uid}.jpg');
  
  await storageRef.putFile(image);
  final downloadURL = await storageRef.getDownloadURL();
  return downloadURL;
}
```

### **3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞**

–í `main.dart` –∏–ª–∏ `login_screen.dart` –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `isOnboardingCompleted`:

```dart
final user = await getCurrentUser();

if (!user.isOnboardingCompleted) {
  // –ü–æ–∫–∞–∑–∞—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥
  Navigator.push(
    context,
    MaterialPageRoute(
      builder: (context) => const SetupProfileScreen(),
    ),
  );
} else {
  // –°—Ä–∞–∑—É –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω
  Navigator.push(
    context,
    MaterialPageRoute(
      builder: (context) => const HomeShell(),
    ),
  );
}
```

---

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π—Ç–µ —ç–∫—Ä–∞–Ω—ã** - –∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
2. **–ü–æ–¥–∫–ª—é—á–∏—Ç–µ backend** - —Ä–µ–∞–ª–∏–∑—É–π—Ç–µ API –≤—ã–∑–æ–≤—ã
3. **–î–æ–±–∞–≤—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É —Ñ–æ—Ç–æ** - Firebase Storage
4. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –Ω–∞–≤–∏–≥–∞—Ü–∏—é** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ–Ω–±–æ—Ä–¥–∏–Ω–≥–∞ –ø—Ä–∏ –≤—Ö–æ–¥–µ

---

## üí° –£–ª—É—á—à–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

1. **–ê–Ω–∏–º–∞—Ü–∏–∏** - –¥–æ–±–∞–≤—å—Ç–µ Hero transitions –º–µ–∂–¥—É —ç–∫—Ä–∞–Ω–∞–º–∏
2. **–í–∞–ª–∏–¥–∞—Ü–∏—è** - –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
3. **–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä** - —ç–∫—Ä–∞–Ω "–í–∞—à –ø—Ä–æ—Ñ–∏–ª—å –≥–æ—Ç–æ–≤!" –ø–µ—Ä–µ–¥ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º
4. **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–π—Ç–µ –≥–¥–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤—ã—Ö–æ–¥—è—Ç
5. **A/B —Ç–µ—Å—Ç—ã** - —Ä–∞–∑–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–ø–∏—Å–∫–∞ –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤

---

## üêõ –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

### **–û—à–∏–±–∫–∞: "Undefined name HomeShell"**
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `home_shell.dart` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω

### **–û—à–∏–±–∫–∞: Permission denied (iOS)**
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –≤ `ios/Runner/Info.plist`:
```xml
<key>NSLocationWhenInUseUsageDescription</key>
<string>–ù—É–∂–Ω–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–±—ã—Ç–∏–π —Ä—è–¥–æ–º</string>
```

### **–û—à–∏–±–∫–∞: Permission denied (Android)**
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤—å—Ç–µ –≤ `android/app/src/main/AndroidManifest.xml`:
```xml
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
```

---

–≠–∫—Ä–∞–Ω—ã –≥–æ—Ç–æ–≤—ã! –ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å! üöÄ
